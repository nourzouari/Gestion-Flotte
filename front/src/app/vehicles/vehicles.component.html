<app-navbar></app-navbar>

<div class="vehicles-container">
  <!-- Bouton d'ajout -->
  <div class="header-action">
    <button (click)="newVehicle()" class="btn btn-primary">
      ‚ûï Ajouter un v√©hicule
    </button>
  </div>

  <!-- Liste des v√©hicules -->
  <div class="vehicle-list-container">
    <table class="vehicle-table" *ngIf="vehicles.length > 0; else noVehicles">
      <thead>
        <tr>
          <th>Immatriculation</th>
          <th>Marque</th>
          <th>Mod√®le</th>
          <th>Ann√©e</th>
          <th>Type</th>
          <th class="actions-header">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vehicle of vehicles">
          <td>{{ vehicle.registration_number }}</td>
          <td>{{ vehicle.brand }}</td>
          <td>{{ vehicle.model }}</td>
          <td>{{ vehicle.year || '‚Äî' }}</td>
          <td>{{ vehicle.type }}</td>

          <td class="actions-cell">
            <div class="actions-buttons">
              <!-- Modifier -->
              <button
                (click)="editVehicle(vehicle)"
                class="btn btn-edit"
                title="Modifier le v√©hicule"
              >
                ‚úèÔ∏è
              </button>

              <!-- Supprimer -->
              <button
                (click)="onDeleteVehicle(vehicle.id!)"
                class="btn btn-delete"
                title="Supprimer le v√©hicule"
              >
                üóëÔ∏è
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Aucun v√©hicule -->
    <ng-template #noVehicles>
      <div class="no-vehicles-message">
        Aucun v√©hicule trouv√©.
        <button (click)="newVehicle()" class="btn btn-link">Ajouter un v√©hicule</button>
      </div>
    </ng-template>
  </div>

  <!-- Pied de page -->
  <div class="footer-info" *ngIf="vehicles.length">
    Affichage de {{ vehicles.length }} v√©hicule(s)
  </div>

  <!-- Chargement -->
  <div class="loading" *ngIf="loading">
    <div class="spinner"></div>
    <span>Chargement en cours...</span>
  </div>

  <!-- Erreur -->
  <div class="error-message" *ngIf="errorMessage">
    <i class="icon-error"></i> {{ errorMessage }}
    <button (click)="loadVehicles()">R√©essayer</button>
  </div>
</div>
